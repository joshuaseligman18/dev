- name: Set Rust Facts
  ansible.builtin.set_fact:
    cargo_path: "{{ ansible_facts['user_dir'] }}/.cargo/bin/cargo"

- name: Install Rust
  ansible.builtin.shell:
    cmd: curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh -s -- -y
    creates: "{{ cargo_path }}"
